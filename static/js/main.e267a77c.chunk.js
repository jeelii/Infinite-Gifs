(this["webpackJsonpgif-search"]=this["webpackJsonpgif-search"]||[]).push([[0],{32:function(e,t,a){e.exports=a(62)},37:function(e,t,a){},43:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(28),s=a.n(c),i=a(9),o=a(7),l=a(1),u=(a(37),n.a.forwardRef((function(e,t){return n.a.createElement("li",{className:"gif-wrap"},n.a.createElement("img",{src:e.url,alt:e.title,ref:t}))}))),m=function(e){return n.a.createElement("li",{className:"no-gifs"},n.a.createElement("h3",null,"Sorry, no GIFs match your search."))},f=n.a.forwardRef((function(e,t){var a,r=e.data;return a=r.length?r.map((function(e,a){return r.length===a+1?n.a.createElement(u,{ref:t,url:e.image,title:e.title,key:e.id}):n.a.createElement(u,{url:e.image,title:e.title,key:e.id})})):n.a.createElement(m,null),n.a.createElement("ul",{className:"gif-list"},a)}));var h=function(e){var t=Object(r.useState)(""),a=Object(o.a)(t,2),c=a[0],s=a[1];return n.a.createElement("form",{className:"search-form",onSubmit:function(t){t.preventDefault(),e.onSearch(c),t.currentTarget.reset()}},n.a.createElement("label",{className:"is-hidden",htmlFor:"search"},"Search"),n.a.createElement("input",{type:"search",onChange:function(e){return s(e.target.value)},name:"search",placeholder:"Find gifs"}),n.a.createElement("button",{type:"submit",id:"submit",className:"search-button"},"Search"))},b=a(10),g=function(e){var t=e.setOffset,a=e.searchHistory;return n.a.createElement("div",{className:"history"},a.length>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{className:"history__title"},"Recent searches:"),n.a.createElement("ul",{className:"history__list"},a.map((function(e,a){return n.a.createElement("li",{key:a,className:"history__item"},n.a.createElement(b.b,{to:"?search=".concat(e),onClick:function(){return t(0)}},e))})))))},d=(a(43),function(e){var t=e.performSearch,a=e.searchHistory,r=e.setOffset;return n.a.createElement("header",{className:"header"},n.a.createElement("div",{className:"inner header__inner"},n.a.createElement(h,{onSearch:t}),n.a.createElement(g,{searchHistory:a,setOffset:r})))}),O=a(17),E=a.n(O),p=a(31),j=a(14),S=a.n(j),v=function(e,t){var a=Object(r.useState)(!0),n=Object(o.a)(a,2),c=n[0],s=n[1],u=Object(r.useState)(!1),m=Object(o.a)(u,2),f=m[0],h=m[1],b=Object(r.useState)(""),g=Object(o.a)(b,2),d=g[0],O=g[1],j=Object(r.useState)([]),v=Object(o.a)(j,2),y=v[0],k=v[1],N=Object(r.useState)([]),w=Object(o.a)(N,2),_=w[0],C=w[1],T=Object(l.e)(),F=Object(r.useCallback)(Object(p.a)(E.a.mark((function e(){var a,r,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),h(!1),c="search",o=T.search,r=new URLSearchParams(o).get(c),n=r||"doggo",0===t&&k([]),S()({method:"GET",url:"https://api.giphy.com/v1/gifs/search",params:{q:n,offset:t,limit:24,api_key:"".concat("dc6zaTOxFJmzC")},cancelToken:new S.a.CancelToken((function(e){return a=e}))}).then((function(e){k((function(t){return Object(i.a)(new Set([].concat(Object(i.a)(t),Object(i.a)(e.data.data.map((function(e){return{id:e.id,image:e.images.fixed_height.url,title:e.title}}))))))})),C(e.data.pagination.total_count>e.data.pagination.count+e.data.pagination.offset),s(!1)})).catch((function(e){if(!S.a.isCancel(e)){"Request failed with status code 429"===e.message&&O("Too many gif requests in a short time, sorry. Take a break and come back."),h(!0)}})),e.abrupt("return",(function(){return a()}));case 7:case"end":return e.stop()}var c,o}),e)}))),[T,t]);return Object(r.useEffect)((function(){F()}),[T,e,F,t]),{loading:c,error:f,errorMessage:d,data:y,hasMore:_}},y=function(){var e=Object(l.d)(),t=Object(l.e)(),a=Object(r.useState)(""),c=Object(o.a)(a,2),s=c[0],u=c[1],m=Object(r.useState)(0),h=Object(o.a)(m,2),b=h[0],g=h[1],O=localStorage.getItem("gifSearches"),E=Object(r.useState)(O?O.split(","):[]),p=Object(o.a)(E,2),j=p[0],S=p[1],y=v(s,b),k=y.data,N=y.hasMore,w=y.loading,_=y.error,C=y.errorMessage,T=Object(r.useRef)(),F=Object(r.useCallback)((function(e){w||(T.current&&T.current.disconnect(),T.current=new IntersectionObserver((function(e){e[0].isIntersecting&&N&&g((function(e){return e+24}))})),e&&T.current.observe(e))}),[w,N]);Object(r.useEffect)((function(){localStorage.setItem("gifSearches",j)}),[j]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(d,{performSearch:function(a){var r=a.trim();if(r){u(r),g(0),S((function(e){return Object(i.a)(new Set([r].concat(Object(i.a)(e.slice(0,5)))))}));var n="?search=".concat(r);t.search!==n&&e.push(n)}},searchHistory:j,setOffset:g}),n.a.createElement("main",{className:"main-content"},n.a.createElement(f,{data:k,ref:F}),w&&n.a.createElement("p",null,"Loading..."),_&&n.a.createElement("p",{className:"error"},"Error! ",C)))};s.a.render(n.a.createElement(b.a,null,n.a.createElement(y,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.e267a77c.chunk.js.map