{"version":3,"sources":["Components/Gif.js","Components/NoGifs.js","Components/GifList.js","Components/SearchForm.js","Components/SearchHistory.js","Components/Header.js","Components/useFetch.js","Components/utilities/getParam.js","Components/App.js","index.js"],"names":["Gif","React","forwardRef","props","ref","className","src","url","alt","title","NoGifs","GifList","gifs","data","length","map","gif","idx","image","key","id","SearchForm","useState","searchText","setSearchText","onSubmit","e","preventDefault","onSearch","currentTarget","reset","htmlFor","type","onChange","target","value","name","placeholder","SearchHistory","setOffset","searchHistory","word","to","onClick","Header","performSearch","useFetch","query","offset","loading","setLoading","error","setError","errorMessage","setErrorMessage","setData","hasMore","setHasMore","location","useLocation","sendQuery","useCallback","a","parameterName","search","locationParam","URLSearchParams","get","searchTerm","axios","method","params","q","limit","api_key","process","cancelToken","CancelToken","c","cancel","then","res","prevGifs","images","fixed_height","pagination","total_count","count","catch","isCancel","message","useEffect","App","history","useHistory","setQuery","oldSearches","localStorage","getItem","split","setSearchHistory","observer","useRef","lastGifRef","node","current","disconnect","IntersectionObserver","entries","isIntersecting","prevOffset","observe","setItem","trimmedValue","trim","prevHistory","Set","slice","newPath","push","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ea5555e7.chunk.js","sourcesContent":["import React from 'react';\n\nconst Gif = React.forwardRef((props, ref) => {\n  return (\n    <li className='gif-wrap'>\n      <img src={props.url} alt={props.title} ref={ref} />\n    </li>\n  );\n});\n\nexport default Gif;\n","import React from 'react';\n\nconst NoGifs = (props) => (\n  <li className='no-gifs'>\n    <h3>Sorry, no GIFs match your search.</h3>\n  </li>\n);\n\nexport default NoGifs;\n","import React from 'react';\nimport Gif from './Gif';\nimport NoGifs from './NoGifs';\n\nconst GifList = React.forwardRef(({ data }, ref) => {\n  let gifs;\n  if (data.length) {\n    gifs = data.map((gif, idx) => {\n      if (data.length === idx + 1) {\n        return (\n          <Gif ref={ref} url={gif.image} title={gif.title} key={gif.id + idx} />\n        );\n      } else {\n        return <Gif url={gif.image} title={gif.title} key={gif.id + idx} />;\n      }\n    });\n  } else {\n    gifs = <NoGifs />;\n  }\n\n  return <ul className='gif-list'>{gifs}</ul>;\n});\n\nexport default GifList;\n","import React, { useState } from 'react';\n\nfunction SearchForm(props) {\n  const [searchText, setSearchText] = useState('');\n\n  const onSearchChange = (e) => setSearchText(e.target.value);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    props.onSearch(searchText);\n    e.currentTarget.reset();\n  };\n\n  return (\n    <form className='search-form' onSubmit={handleSubmit}>\n      <label className='is-hidden' htmlFor='search'>\n        Search\n      </label>\n      <input\n        type='search'\n        onChange={onSearchChange}\n        name='search'\n        placeholder='Find gifs'\n      />\n      <button type='submit' id='submit' className='search-button'>\n        Search\n      </button>\n    </form>\n  );\n}\n\nexport default SearchForm;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nconst SearchHistory = ({ setOffset, searchHistory }) => {\n  return (\n    <div className='history'>\n      {searchHistory.length > 0 && (\n        <>\n          <h2 className='history__title'>Recent searches:</h2>\n          <ul className='history__list'>\n            {searchHistory.map((word, idx) => {\n              return (\n                <li key={idx} className='history__item'>\n                  <Link to={`?search=${word}`} onClick={() => setOffset(0)}>\n                    {word}\n                  </Link>\n                </li>\n              );\n            })}\n          </ul>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default SearchHistory;\n","import React from 'react';\nimport SearchForm from './SearchForm';\nimport SearchHistory from './SearchHistory';\nimport './styles/Header.css';\n\nconst Header = ({ performSearch, searchHistory, setOffset }) => {\n  return (\n    <header className='header'>\n      <div className='inner header__inner'>\n        <SearchForm onSearch={performSearch} />\n        <SearchHistory searchHistory={searchHistory} setOffset={setOffset} />\n      </div>\n    </header>\n  );\n};\n\nexport default Header;\n","import { useState, useEffect, useCallback } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport axios from 'axios';\nimport getParam from './utilities/getParam';\n\nconst useFetch = (query, offset) => {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [data, setData] = useState([]);\n  const [hasMore, setHasMore] = useState([]);\n\n  const location = useLocation();\n\n  const sendQuery = useCallback(async () => {\n    setLoading(true);\n    setError(false);\n    let cancel;\n    const locationParam = getParam('search', location.search);\n    const searchTerm = locationParam ? locationParam : 'doggo';\n    if (offset === 0) setData([]);\n    axios({\n      method: 'GET',\n      url: 'https://api.giphy.com/v1/gifs/search',\n      params: {\n        q: searchTerm,\n        offset: offset,\n        limit: 50,\n        api_key: `${process.env.REACT_APP_API_KEY}`,\n      },\n      cancelToken: new axios.CancelToken((c) => (cancel = c)),\n    })\n      .then((res) => {\n        setData((prevGifs) => {\n          return [\n            ...prevGifs,\n            ...res.data.data.map((gif) => {\n              return {\n                id: gif.id,\n                image: gif.images.fixed_height.url,\n                title: gif.title,\n              };\n            }),\n          ];\n        });\n        setHasMore(\n          res.data.pagination.total_count >\n            res.data.pagination.count + res.data.pagination.offset\n        );\n        setLoading(false);\n      })\n      .catch((e) => {\n        if (axios.isCancel(e)) return;\n        const giphyTooManyReqsMsg = 'Request failed with status code 429';\n        if (e.message === giphyTooManyReqsMsg)\n          setErrorMessage(\n            'Too many gif requests in a short time, sorry. Take a break and come back.'\n          );\n        setError(true);\n      });\n    return () => cancel();\n  }, [location, offset]);\n\n  useEffect(() => {\n    sendQuery();\n  }, [location, query, sendQuery, offset]);\n\n  return { loading, error, errorMessage, data, hasMore };\n};\n\nexport default useFetch;\n","export default (parameterName, url) => {\n  const urlParams = new URLSearchParams(url);\n  return urlParams.get(parameterName);\n};","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport './styles/App.css';\n\nimport GifList from './GifList';\nimport Header from './Header';\nimport useFetch from './useFetch';\n\nconst App = () => {\n  const history = useHistory();\n  const location = useLocation();\n\n  const [query, setQuery] = useState('');\n  const [offset, setOffset] = useState(0);\n  const oldSearches = localStorage.getItem('gifSearches');\n  const [searchHistory, setSearchHistory] = useState(\n    oldSearches ? oldSearches.split(',') : []\n  );\n\n  const { data, hasMore, loading, error, errorMessage } = useFetch(\n    query,\n    offset\n  );\n\n  const observer = useRef();\n  const lastGifRef = useCallback(\n    (node) => {\n      if (loading) return;\n      if (observer.current) observer.current.disconnect();\n      observer.current = new IntersectionObserver((entries) => {\n        if (entries[0].isIntersecting && hasMore) {\n          setOffset((prevOffset) => prevOffset + 50);\n        }\n      });\n      if (node) observer.current.observe(node);\n    },\n    [loading, hasMore]\n  );\n\n  useEffect(() => {\n    localStorage.setItem('gifSearches', searchHistory);\n  }, [searchHistory]);\n\n  const performSearch = (value) => {\n    const trimmedValue = value.trim();\n    if (!trimmedValue) return;\n    setQuery(trimmedValue);\n    setOffset(0);\n    setSearchHistory((prevHistory) => {\n      return [...new Set([trimmedValue, ...prevHistory.slice(0, 5)])];\n    });\n    const newPath = `?search=${trimmedValue}`;\n    if (location.search !== newPath) {\n      history.push(newPath);\n    }\n    return;\n  };\n\n  return (\n    <>\n      <Header\n        performSearch={performSearch}\n        searchHistory={searchHistory}\n        setOffset={setOffset}\n      />\n      <main className='main-content'>\n        <GifList data={data} ref={lastGifRef} />\n        {loading && <p>Loading...</p>}\n        {error && <p className='error'>Error! {errorMessage}</p>}\n      </main>\n    </>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './Components/App';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}