(this["webpackJsonpgif-search"]=this["webpackJsonpgif-search"]||[]).push([[0],{32:function(e,t,a){e.exports=a(62)},37:function(e,t,a){},43:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(28),s=a.n(c),i=a(10),o=a(7),l=a(1);a(37);var u=function(e){var t=e.onSearch,a=Object(r.useState)(""),c=Object(o.a)(a,2),s=c[0],i=c[1];return n.a.createElement("form",{className:"search-form",onSubmit:function(e){e.preventDefault(),t(s),e.currentTarget.reset()}},n.a.createElement("label",{className:"is-hidden",htmlFor:"search"},"Search"),n.a.createElement("input",{type:"search",onChange:function(e){return i(e.target.value)},name:"search",placeholder:"Find gifs"}),n.a.createElement("button",{type:"submit",id:"submit",className:"search-button"},"Search"))},m=a(9),f=function(e){var t=e.setOffset,a=e.searchHistory;return n.a.createElement("div",{className:"history"},a.length>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{className:"history__title"},"Recent searches:"),n.a.createElement("ul",{className:"history__list"},a.map((function(e,a){return n.a.createElement("li",{key:a,className:"history__item"},n.a.createElement(m.b,{to:"?search=".concat(e),onClick:function(){return t(0)}},e))})))))},h=(a(43),function(e){var t=e.performSearch,a=e.searchHistory,r=e.setOffset;return n.a.createElement("header",{className:"header"},n.a.createElement("div",{className:"inner header__inner"},n.a.createElement(u,{onSearch:t}),n.a.createElement(f,{searchHistory:a,setOffset:r})))}),b=n.a.forwardRef((function(e,t){var a=e.url,r=e.title;return n.a.createElement("li",{className:"gif-wrap"},n.a.createElement("img",{src:a,alt:r,ref:t}))})),g=function(e){var t=e.message;return n.a.createElement("li",{className:"no-gifs"},n.a.createElement("h3",null,t))},d=n.a.forwardRef((function(e,t){var a,r=e.data,c=e.error;return a=r.length?r.map((function(e,a){return r.length===a+1?n.a.createElement(b,{ref:t,url:e.image,title:e.title,key:e.id+a}):n.a.createElement(b,{url:e.image,title:e.title,key:e.id+a})})):n.a.createElement(g,{message:"Sorry, no GIFs match your search."}),n.a.createElement("ul",{className:"gif-list"},!c&&a)})),O=a(17),E=a.n(O),p=a(31),j=a(14),S=a.n(j),v=function(e,t){var a=Object(r.useState)(!0),n=Object(o.a)(a,2),c=n[0],s=n[1],u=Object(r.useState)(!1),m=Object(o.a)(u,2),f=m[0],h=m[1],b=Object(r.useState)(""),g=Object(o.a)(b,2),d=g[0],O=g[1],j=Object(r.useState)([]),v=Object(o.a)(j,2),y=v[0],k=v[1],N=Object(r.useState)([]),w=Object(o.a)(N,2),_=w[0],C=w[1],I=Object(l.e)(),F=Object(r.useCallback)(Object(p.a)(E.a.mark((function e(){var a,r,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),h(!1),c="search",o=I.search,r=new URLSearchParams(o).get(c),n=r||"doggo",0===t&&k([]),S()({method:"GET",url:"https://api.giphy.com/v1/gifs/search",params:{q:n,offset:t,limit:50,api_key:"".concat("COqensqusgX63rW0V9QiIS3aC1286GSW")},cancelToken:new S.a.CancelToken((function(e){return a=e}))}).then((function(e){k((function(t){return[].concat(Object(i.a)(t),Object(i.a)(e.data.data.map((function(e){return{id:e.id,image:e.images.fixed_height.url,title:e.title}}))))})),C(e.data.pagination.total_count>e.data.pagination.count+e.data.pagination.offset),s(!1)})).catch((function(e){if(!S.a.isCancel(e)){"Request failed with status code 429"===e.message&&O("Too many gif requests in a short time, sorry. Take a break and come back."),h(!0)}})),e.abrupt("return",(function(){return a()}));case 7:case"end":return e.stop()}var c,o}),e)}))),[I,t]);return Object(r.useEffect)((function(){F()}),[I,e,F,t]),{loading:c,error:f,errorMessage:d,data:y,hasMore:_}},y=function(){var e=Object(l.d)(),t=Object(l.e)(),a=localStorage.getItem("gifSearches"),c=Object(r.useState)(""),s=Object(o.a)(c,2),u=s[0],m=s[1],f=Object(r.useState)(0),b=Object(o.a)(f,2),O=b[0],E=b[1],p=Object(r.useState)(a?a.split(","):[]),j=Object(o.a)(p,2),S=j[0],y=j[1],k=v(u,O),N=k.data,w=k.hasMore,_=k.loading,C=k.error,I=k.errorMessage,F=Object(r.useRef)(),R=Object(r.useCallback)((function(e){_||(F.current&&F.current.disconnect(),F.current=new IntersectionObserver((function(e){e[0].isIntersecting&&w&&E((function(e){return e+50}))})),e&&F.current.observe(e))}),[_,w]);Object(r.useEffect)((function(){localStorage.setItem("gifSearches",S)}),[S]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(h,{performSearch:function(a){var r=a.trim();if(r){m(r),E(0),y((function(e){return Object(i.a)(new Set([r].concat(Object(i.a)(e.slice(0,5)))))}));var n="?search=".concat(r);t.search!==n&&e.push(n)}},searchHistory:S,setOffset:E}),n.a.createElement("main",{className:"main-content"},n.a.createElement(d,{data:N,error:C,ref:R}),_&&n.a.createElement("p",null,"Loading..."),C&&n.a.createElement(g,{message:n.a.createElement(n.a.Fragment,null,"Error! ",I)})))};s.a.render(n.a.createElement(m.a,null,n.a.createElement(y,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.e1faa19c.chunk.js.map