(this["webpackJsonpgif-search"]=this["webpackJsonpgif-search"]||[]).push([[0],{32:function(e,t,a){e.exports=a(61)},37:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),i=a.n(c),s=a(7),l=a(1);a(37);var u=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],i=a[1];return r.a.createElement("form",{className:"search-form",onSubmit:function(t){t.preventDefault(),e.onSearch(c),t.currentTarget.reset()}},r.a.createElement("label",{className:"is-hidden",htmlFor:"search"},"Search"),r.a.createElement("input",{type:"search",onChange:function(e){return i(e.target.value)},name:"search",placeholder:"Find gifs"}),r.a.createElement("button",{type:"submit",id:"submit",className:"search-button"},r.a.createElement("i",{className:"material-icons icn-search"},"search")))},o=r.a.forwardRef((function(e,t){return r.a.createElement("li",{className:"gif-wrap"},r.a.createElement("img",{src:e.url,alt:e.title,ref:t}))})),m=function(e){return r.a.createElement("li",{className:"no-gifs"},r.a.createElement("i",{className:"material-icons icon-gif"},"sentiment_very_dissatisfied"),r.a.createElement("h3",null,"Sorry, no GIFs match your search."))},f=r.a.forwardRef((function(e,t){var a,n=e.data;return a=n.length?n.map((function(e,a){return n.length===a+1?r.a.createElement(o,{ref:t,url:e.image,title:e.title,key:e.id}):r.a.createElement(o,{url:e.image,title:e.title,key:e.id})})):r.a.createElement(m,null),r.a.createElement("ul",{className:"gif-list"},a)})),h=a(16),d=a.n(h),b=a(14),g=a(29),E=a(13),p=a.n(E),O=function(e,t){var a=Object(n.useState)(!0),r=Object(s.a)(a,2),c=r[0],i=r[1],u=Object(n.useState)(!1),o=Object(s.a)(u,2),m=o[0],f=o[1],h=Object(n.useState)([]),E=Object(s.a)(h,2),O=E[0],j=E[1],v=Object(n.useState)([]),S=Object(s.a)(v,2),w=S[0],N=S[1],k=Object(l.e)(),y=Object(n.useCallback)(Object(g.a)(d.a.mark((function e(){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),f(!1),c="search",s=k.search,n=new URLSearchParams(s).get(c),r=n||"doggo",0===t&&j([]),p()({method:"GET",url:"http://api.giphy.com/v1/gifs/search",params:{q:r,offset:t,limit:24,api_key:"".concat("dc6zaTOxFJmzC")},cancelToken:new p.a.CancelToken((function(e){return a=e}))}).then((function(e){j((function(t){return Object(b.a)(new Set([].concat(Object(b.a)(t),Object(b.a)(e.data.data.map((function(e){return{id:e.id,image:e.images.fixed_height.url,title:e.title}}))))))})),N(e.data.pagination.total_count>e.data.pagination.count+e.data.pagination.offset),i(!1)})).catch((function(e){p.a.isCancel(e)||(console.log(e),f(!0))})),e.abrupt("return",(function(){return a()}));case 7:case"end":return e.stop()}var c,s}),e)}))),[k,t]);return Object(n.useEffect)((function(){y()}),[k,e,y,t]),{loading:c,error:m,data:O,hasMore:w}},j=function(){var e=Object(l.d)(),t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(0),m=Object(s.a)(o,2),h=m[0],d=m[1],b=O(c,h),g=b.data,E=b.hasMore,p=b.loading,j=b.error,v=Object(n.useRef)(),S=Object(n.useCallback)((function(e){p||(v.current&&v.current.disconnect(),v.current=new IntersectionObserver((function(e){e[0].isIntersecting&&E&&d((function(e){return e+24}))})),e&&v.current.observe(e))}),[p,E]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"main-header"},r.a.createElement("div",{className:"inner"},r.a.createElement(u,{onSearch:function(t){i(t),d(0);var a="?search=".concat(t);return e.push(a)}}))),r.a.createElement("div",{className:"main-content"},r.a.createElement(f,{data:g,ref:S}),r.a.createElement("div",null,p&&"Loading..."),r.a.createElement("div",null,j&&"Error")))},v=a(11);i.a.render(r.a.createElement(v.a,null,r.a.createElement(j,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.e4cd8afd.chunk.js.map